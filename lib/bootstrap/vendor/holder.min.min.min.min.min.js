/*!

Holder - client side image placeholders
Version 2.9.4+cabil
Â© 2016 Ivan Malopinsky - http://imsky.co

Site:     http://holderjs.com
Issues:   https://github.com/imsky/holder/issues
License:  MIT

*/
;!function(c){if(c.document){var d=c.document;d.querySelectorAll||(d.querySelectorAll=function(g){var a,b=d.createElement("style"),h=[];for(d.documentElement.firstChild.appendChild(b),d._qsa=[],b.styleSheet.cssText=g+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",c.scrollBy(0,0),b.parentNode.removeChild(b);d._qsa.length;){a=d._qsa.shift(),a.style.removeAttribute("x-qsa"),h.push(a)}return d._qsa=null,h}),d.querySelector||(d.querySelector=function(b){var a=d.querySelectorAll(b);return a.length?a[0]:null}),d.getElementsByClassName||(d.getElementsByClassName=function(a){return a=String(a).replace(/^|\s+/g,"."),d.querySelectorAll(a)}),Object.keys||(Object.keys=function(e){if(e!==Object(e)){throw TypeError("Object.keys called on non-object")}var a,b=[];for(a in e){Object.prototype.hasOwnProperty.call(e,a)&&b.push(a)}return b}),Array.prototype.forEach||(Array.prototype.forEach=function(j){if(void 0===this||null===this){throw TypeError()}var b=Object(this),i=b.length>>>0;if("function"!=typeof j){throw TypeError()}var a,e=arguments[1];for(a=0;a<i;a++){a in b&&j.call(e,b[a],a,b)}}),function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.atob=a.atob||function(p){p=String(p);var m,e=0,i=[],o=0,n=0;if(p=p.replace(/\s/g,""),p.length%4===0&&(p=p.replace(/=+$/,"")),p.length%4===1){throw Error("InvalidCharacterError")}if(/[^+\/0-9A-Za-z]/.test(p)){throw Error("InvalidCharacterError")}for(;e<p.length;){m=b.indexOf(p.charAt(e)),o=o<<6|m,n+=6,24===n&&(i.push(String.fromCharCode(o>>16&255)),i.push(String.fromCharCode(o>>8&255)),i.push(String.fromCharCode(255&o)),n=0,o=0),e+=1}return 12===n?(o>>=4,i.push(String.fromCharCode(255&o))):18===n&&(o>>=2,i.push(String.fromCharCode(o>>8&255)),i.push(String.fromCharCode(255&o))),i.join("")},a.btoa=a.btoa||function(e){e=String(e);var n,r,i,o,x,s,l,h=0,u=[];if(/[^\x00-\xFF]/.test(e)){throw Error("InvalidCharacterError")}for(;h<e.length;){n=e.charCodeAt(h++),r=e.charCodeAt(h++),i=e.charCodeAt(h++),o=n>>2,x=(3&n)<<4|r>>4,s=(15&r)<<2|i>>6,l=63&i,h===e.length+2?(s=64,l=64):h===e.length+1&&(l=64),u.push(b.charAt(o),b.charAt(x),b.charAt(s),b.charAt(l))}return u.join("")}}(c),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=this.__proto__||this.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){if("performance" in c==!1&&(c.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now" in c.performance==!1){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart),c.performance.now=function(){return Date.now()-a}}}(),c.requestAnimationFrame||(c.webkitRequestAnimationFrame&&c.webkitCancelAnimationFrame?!function(a){a.requestAnimationFrame=function(b){return webkitRequestAnimationFrame(function(){b(a.performance.now())})},a.cancelAnimationFrame=a.webkitCancelAnimationFrame}(c):c.mozRequestAnimationFrame&&c.mozCancelAnimationFrame?!function(a){a.requestAnimationFrame=function(b){return mozRequestAnimationFrame(function(){b(a.performance.now())})},a.cancelAnimationFrame=a.mozCancelAnimationFrame}(c):!function(a){a.requestAnimationFrame=function(b){return a.setTimeout(b,1000/60)},a.cancelAnimationFrame=a.clearTimeout}(c))}}(this),function(c,d){"object"==typeof exports&&"object"==typeof module?module.exports=d():"function"==typeof define&&define.amd?define([],d):"object"==typeof exports?exports.Holder=d():c.Holder=d()}(this,function(){return function(f){function d(a){if(e[a]){return e[a].exports}var b=e[a]={exports:{},id:a,loaded:!1};return f[a].call(b.exports,b,b.exports,d),b.loaded=!0,b.exports}var e={};return d.m=f,d.c=e,d.p="",d(0)}([function(f,d,e){f.exports=e(1)},function(f,d,e){(function(g){function ad(B,G,n,q){var H=T(n.substr(n.lastIndexOf(B.domain)),B);H&&D({mode:null,el:q,flags:H,engineSettings:G})}function T(K,G){var P={theme:F(w.settings.themes.gray,null),stylesheets:G.stylesheets,instanceOptions:G},q=K.indexOf("?"),L=[K];q!==-1&&(L=[K.slice(0,q),K.slice(q+1)]);var n=L[0].split("/");P.holderURL=K;var I=n[1],B=I.match(/([\d]+p?)x([\d]+p?)/);if(!B){return !1}if(P.fluid=I.indexOf("p")!==-1,P.dimensions={width:B[1].replace("p","%"),height:B[2].replace("p","%")},2===L.length){var N=o.parse(L[1]);if(p.truthy(N.ratio)){P.fluid=!0;var M=parseFloat(P.dimensions.width.replace("%","")),H=parseFloat(P.dimensions.height.replace("%",""));H=Math.floor(100*(H/M)),M=100,P.dimensions.width=M+"%",P.dimensions.height=H+"%"}if(P.auto=p.truthy(N.auto),N.bg&&(P.theme.bg=p.parseColor(N.bg)),N.fg&&(P.theme.fg=p.parseColor(N.fg)),N.bg&&!N.fg&&(P.autoFg=!0),N.theme&&P.instanceOptions.themes.hasOwnProperty(N.theme)&&(P.theme=F(P.instanceOptions.themes[N.theme],null)),N.text&&(P.text=N.text),N.textmode&&(P.textmode=N.textmode),N.size&&(P.size=N.size),N.font&&(P.font=N.font),N.align&&(P.align=N.align),N.lineWrap&&(P.lineWrap=N.lineWrap),P.nowrap=p.truthy(N.nowrap),P.outline=p.truthy(N.outline),p.truthy(N.random)){w.vars.cache.themeKeys=w.vars.cache.themeKeys||Object.keys(P.instanceOptions.themes);var J=w.vars.cache.themeKeys[0|Math.random()*w.vars.cache.themeKeys.length];P.theme=F(P.instanceOptions.themes[J],null)}}return P}function D(J){var n=J.mode,H=J.el,U=J.flags,q=J.engineSettings,P=U.dimensions,W=U.theme,B=P.width+"x"+P.height;n=null==n?U.fluid?"fluid":"image":n;var I=/holder_([a-z]+)/g,K=!1;if(null!=U.text&&(W.text=U.text,"object"===H.nodeName.toLowerCase())){for(var M=W.text.split("\\n"),R=0;R<M.length;R++){M[R]=p.encodeHtmlEntity(M[R])}W.text=M.join("\\n")}if(W.text){var L=W.text.match(I);null!==L&&L.forEach(function(X){"holder_dimensions"===X&&(W.text=W.text.replace(X,B))})}var G=U.holderURL,N=F(q,null);if(U.font&&(W.font=U.font,!N.noFontFallback&&"img"===H.nodeName.toLowerCase()&&w.setup.supportsCanvas&&"svg"===N.renderer&&(N=F(N,{renderer:"canvas"}))),U.font&&"canvas"==N.renderer&&(N.reRender=!0),"background"==n){null==H.getAttribute("data-background-src")&&t.setAttr(H,{"data-background-src":G})}else{var Q={};Q[w.vars.dataAttr]=G,t.setAttr(H,Q)}U.theme=W,H.holderData={flags:U,engineSettings:N},"image"!=n&&"fluid"!=n||t.setAttr(H,{alt:W.text?K?W.text:W.text+" ["+B+"]":B});var V={mode:n,el:H,holderSettings:{dimensions:P,theme:W,flags:U},engineSettings:N};"image"==n?(U.auto||(H.style.width=P.width+"px",H.style.height=P.height+"px"),"html"==N.renderer?H.style.backgroundColor=W.bg:(y(V),"exact"==U.textmode&&(H.holderData.resizeUpdate=!0,w.vars.resizableImages.push(H),O(H)))):"background"==n&&"html"!=N.renderer?y(V):"fluid"==n&&(H.holderData.resizeUpdate=!0,"%"==P.height.slice(-1)?H.style.height=P.height:null!=U.auto&&U.auto||(H.style.height=P.height+"px"),"%"==P.width.slice(-1)?H.style.width=P.width:null!=U.auto&&U.auto||(H.style.width=P.width+"px"),"inline"!=H.style.display&&""!==H.style.display&&"none"!=H.style.display||(H.style.display="block"),i(H),"html"==N.renderer?H.style.backgroundColor=W.bg:(w.vars.resizableImages.push(H),O(H)))}function y(J){function q(){var M=null;switch(n.renderer){case"canvas":M=h(H,J);break;case"svg":M=a(H,J);break;default:throw"Holder: invalid renderer: "+n.renderer}return M}var G=null,K=J.mode,B=J.el,I=J.holderSettings,n=J.engineSettings;switch(n.renderer){case"svg":if(!w.setup.supportsSVG){return}break;case"canvas":if(!w.setup.supportsCanvas){return}break;default:return}var L={width:I.dimensions.width,height:I.dimensions.height,theme:I.theme,flags:I.flags},H=b(L);if(G=q(),null==G){throw"Holder: couldn't render placeholder"}"background"==K?(B.style.backgroundImage="url("+G+")",n.noBackgroundSize||(B.style.backgroundSize=L.width+"px "+L.height+"px")):("img"===B.nodeName.toLowerCase()?t.setAttr(B,{src:G}):"object"===B.nodeName.toLowerCase()&&t.setAttr(B,{data:G,type:"image/svg+xml"}),n.reRender&&g.setTimeout(function(){var M=q();if(null==M){throw"Holder: couldn't render placeholder"}"img"===B.nodeName.toLowerCase()?t.setAttr(B,{src:M}):"object"===B.nodeName.toLowerCase()&&t.setAttr(B,{data:M,type:"image/svg+xml"})},150)),t.setAttr(B,{"data-holder-rendered":!0})}function b(J){function V(ah,ai,aj,ak){ai.width=aj,ai.height=ak,ah.width=Math.max(ah.width,ai.width),ah.height+=ai.height}var ae=w.defaults.size;switch(parseFloat(J.theme.size)?ae=J.theme.size:parseFloat(J.flags.size)&&(ae=J.flags.size),J.font={family:J.theme.font?J.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:z(J.width,J.height,ae,w.defaults.scale),units:J.theme.units?J.theme.units:w.defaults.units,weight:J.theme.fontweight?J.theme.fontweight:"bold"},J.text=J.theme.text||Math.floor(J.width)+"x"+Math.floor(J.height),J.noWrap=J.theme.nowrap||J.flags.nowrap,J.align=J.theme.align||J.flags.align||"center",J.flags.textmode){case"literal":J.text=J.flags.dimensions.width+"x"+J.flags.dimensions.height;break;case"exact":if(!J.flags.exactDimensions){break}J.text=Math.floor(J.flags.exactDimensions.width)+"x"+Math.floor(J.flags.exactDimensions.height)}var K=J.flags.lineWrap||w.setup.lineWrapRatio,W=J.width*K,af=W,Z=new u({width:J.width,height:J.height}),R=Z.Shape,U=new R.Rect("holderBg",{fill:J.theme.bg});if(U.resize(J.width,J.height),Z.root.add(U),J.flags.outline){var X=new x(U.properties.fill);X=X.lighten(X.lighterThan("7f7f7f")?-0.1:0.1),U.properties.outline={fill:X.toHex(!0),width:2}}var H=J.theme.fg;if(J.flags.autoFg){var I=new x(U.properties.fill),L=new x("fff"),ag=new x("000",{alpha:0.285714});H=I.blendAlpha(I.lighterThan("7f7f7f")?ag:L).toHex(!0)}var Q=new R.Group("holderTextGroup",{text:J.text,align:J.align,font:J.font,fill:H});Q.moveTo(null,null,1),Z.root.add(Q);var aa=Q.textPositionData=v(Z);if(!aa){throw"Holder: staging fallback not supported yet."}Q.properties.leading=aa.boundingBox.height;var B=null,G=null;if(aa.lineCount>1){var ab,q=0,n=0,P=0;G=new R.Group("line"+P),"left"!==J.align&&"right"!==J.align||(af=J.width*(1-2*(1-K)));for(var N=0;N<aa.words.length;N++){var Y=aa.words[N];B=new R.Text(Y.text);var M="\\n"==Y.text;!J.noWrap&&(q+Y.width>=af||M===!0)&&(V(Q,G,q,Q.properties.leading),Q.add(G),q=0,n+=Q.properties.leading,P+=1,G=new R.Group("line"+P),G.y=n),M!==!0&&(B.moveTo(q,0),q+=aa.spaceWidth+Y.width,G.add(B))}if(V(Q,G,q,Q.properties.leading),Q.add(G),"left"===J.align){Q.moveTo(J.width-W,null,null)}else{if("right"===J.align){for(ab in Q.children){G=Q.children[ab],G.moveTo(J.width-G.width,null,null)}Q.moveTo(0-(J.width-W),null,null)}else{for(ab in Q.children){G=Q.children[ab],G.moveTo((Q.width-G.width)/2,null,null)}Q.moveTo((J.width-Q.width)/2,null,null)}}Q.moveTo(null,(J.height-Q.height)/2,null),(J.height-Q.height)/2<0&&Q.moveTo(null,0,null)}else{B=new R.Text(J.text),G=new R.Group("line0"),G.add(B),Q.add(G),"left"===J.align?Q.moveTo(J.width-W,null,null):"right"===J.align?Q.moveTo(0-(J.width-W),null,null):Q.moveTo((J.width-aa.boundingBox.width)/2,null,null),Q.moveTo(null,(J.height-aa.boundingBox.height)/2,null)}return Z}function z(K,J,B,H){var n=parseInt(K,10),G=parseInt(J,10),L=Math.max(n,G),I=Math.min(n,G),q=0.8*Math.min(I,L*H);return Math.round(Math.max(B,q))}function O(J){var I;I=null==J||null==J.nodeType?w.vars.resizableImages:[J];for(var q=0,G=I.length;q<G;q++){var K=I[q];if(K.holderData){var B=K.holderData.flags,H=r(K);if(H){if(!K.holderData.resizeUpdate){continue}if(B.fluid&&B.auto){var n=K.holderData.fluidConfig;switch(n.mode){case"width":H.height=H.width/n.ratio;break;case"height":H.width=H.height*n.ratio}}var L={mode:"image",holderSettings:{dimensions:H,theme:B.theme,flags:B},el:K,engineSettings:K.holderData.engineSettings};"exact"==B.textmode&&(B.exactDimensions=H,L.holderSettings.dimensions=B.dimensions),y(L)}else{s(K)}}}}function i(B){if(B.holderData){var G=r(B);if(G){var n=B.holderData.flags,q={fluidHeight:"%"==n.dimensions.height.slice(-1),fluidWidth:"%"==n.dimensions.width.slice(-1),mode:null,initialDimensions:G};q.fluidWidth&&!q.fluidHeight?(q.mode="width",q.ratio=q.initialDimensions.width/parseFloat(n.dimensions.height)):!q.fluidWidth&&q.fluidHeight&&(q.mode="height",q.ratio=parseFloat(n.dimensions.width)/q.initialDimensions.height),B.holderData.fluidConfig=q}else{s(B)}}}function k(){var B,n=[],q=Object.keys(w.vars.invisibleImages);q.forEach(function(G){B=w.vars.invisibleImages[G],r(B)&&"img"==B.nodeName.toLowerCase()&&(n.push(B),delete w.vars.invisibleImages[G])}),n.length&&l.run({images:n}),setTimeout(function(){g.requestAnimationFrame(k)},10)}function m(){w.vars.visibilityCheckStarted||(g.requestAnimationFrame(k),w.vars.visibilityCheckStarted=!0)}function s(n){n.holderData.invisibleId||(w.vars.invisibleId+=1,w.vars.invisibleImages["i"+w.vars.invisibleId]=n,n.holderData.invisibleId=w.vars.invisibleId)}function S(n){w.vars.debounceTimer||n.call(this),w.vars.debounceTimer&&g.clearTimeout(w.vars.debounceTimer),w.vars.debounceTimer=g.setTimeout(function(){w.vars.debounceTimer=null,n.call(this)},w.setup.debounce)}function E(){S(function(){O(null)})}var A=e(2),o=e(3),u=e(6),p=e(7),j=e(8),t=e(9),x=e(10),ac=e(11),a=e(12),h=e(15),F=p.extend,r=p.dimensionCheck,C=ac.svg_ns,l={version:ac.version,addTheme:function(n,q){return null!=n&&null!=q&&(w.settings.themes[n]=q),delete w.vars.cache.themeKeys,this},addImage:function(B,n){var q=t.getNodeArray(n);return q.forEach(function(I){var G=t.newEl("img"),H={};H[w.setup.dataAttr]=B,t.setAttr(G,H),I.appendChild(G)}),this},setResizeUpdate:function(n,q){n.holderData&&(n.holderData.resizeUpdate=!!q,n.holderData.resizeUpdate&&O(n))},run:function(B){B=B||{};var n={},I=F(w.settings,B);w.vars.preempted=!0,w.vars.dataAttr=I.dataAttr||w.setup.dataAttr,n.renderer=I.renderer?I.renderer:w.setup.renderer,w.setup.renderers.join(",").indexOf(n.renderer)===-1&&(n.renderer=w.setup.supportsSVG?"svg":w.setup.supportsCanvas?"canvas":"html");var q=t.getNodeArray(I.images),J=t.getNodeArray(I.bgnodes),G=t.getNodeArray(I.stylenodes),H=t.getNodeArray(I.objects);return n.stylesheets=[],n.svgXMLStylesheet=!0,n.noFontFallback=!!I.noFontFallback,n.noBackgroundSize=!!I.noBackgroundSize,G.forEach(function(K){if(K.attributes.rel&&K.attributes.href&&"stylesheet"==K.attributes.rel.value){var M=K.attributes.href.value,L=t.newEl("a");L.href=M;var N=L.protocol+"//"+L.host+L.pathname+L.search;n.stylesheets.push(N)}}),J.forEach(function(K){if(g.getComputedStyle){var P=g.getComputedStyle(K,null).getPropertyValue("background-image"),Q=K.getAttribute("data-background-src"),N=Q||P,M=null,R=I.domain+"/",U=N.indexOf(R);if(0===U){M=N}else{if(1===U&&"?"===N[0]){M=N.slice(1)}else{var V=N.substr(U).match(/([^\"]*)"?\)/);if(null!==V){M=V[1]}else{if(0===N.indexOf("url(")){throw"Holder: unable to parse background URL: "+N}}}}if(M){var L=T(M,I);L&&D({mode:"background",el:K,flags:L,engineSettings:n})}}}),H.forEach(function(L){var N={};try{N.data=L.getAttribute("data"),N.dataSrc=L.getAttribute(w.vars.dataAttr)}catch(K){}var P=null!=N.data&&0===N.data.indexOf(I.domain),M=null!=N.dataSrc&&0===N.dataSrc.indexOf(I.domain);P?ad(I,n,N.data,L):M&&ad(I,n,N.dataSrc,L)}),q.forEach(function(Q){var M={};try{M.src=Q.getAttribute("src"),M.dataSrc=Q.getAttribute(w.vars.dataAttr),M.rendered=Q.getAttribute("data-holder-rendered")}catch(N){}var P=null!=M.src,K=null!=M.dataSrc&&0===M.dataSrc.indexOf(I.domain),L=null!=M.rendered&&"true"==M.rendered;P?0===M.src.indexOf(I.domain)?ad(I,n,M.src,Q):K&&(L?ad(I,n,M.dataSrc,Q):!function(X,U,V,R,W){p.imageExists(X,function(Y){Y||ad(U,V,R,W)})}(M.src,I,n,M.dataSrc,Q)):K&&ad(I,n,M.dataSrc,Q)}),this}},w={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",themes:{gray:{bg:"#EEEEEE",fg:"#AAAAAA"},social:{bg:"#3a5a97",fg:"#FFFFFF"},industrial:{bg:"#434A52",fg:"#C2F200"},sky:{bg:"#0D8FDB",fg:"#FFFFFF"},vine:{bg:"#39DBAC",fg:"#1E292C"},lava:{bg:"#F8591A",fg:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16}},v=function(){var B=null,n=null,q=null;return function(W){var H=W.root;if(w.setup.supportsSVG){var M=!1,V=function(Z){return document.createTextNode(Z)};null!=B&&B.parentNode===document.body||(M=!0),B=j.initSVG(B,H.properties.width,H.properties.height),B.style.display="block",M&&(n=t.newEl("text",C),q=V(null),t.setAttr(n,{x:0}),n.appendChild(q),B.appendChild(n),document.body.appendChild(B),B.style.visibility="hidden",B.style.position="absolute",B.style.top="-100%",B.style.left="-100%");var Y=H.children.holderTextGroup,J=Y.properties;t.setAttr(n,{y:J.font.size,style:p.cssProps({"font-weight":J.font.weight,"font-size":J.font.size+J.font.units,"font-family":J.font.family})}),q.nodeValue=J.text;var Q=n.getBBox(),G=Math.ceil(Q.width/H.properties.width),L=J.text.split(" "),N=J.text.match(/\\n/g);G+=null==N?0:N.length,q.nodeValue=J.text.replace(/[ ]+/g,"");var I=n.getComputedTextLength(),U=Q.width-I,P=Math.round(U/Math.max(1,L.length-1)),K=[];if(G>1){q.nodeValue="";for(var R=0;R<L.length;R++){if(0!==L[R].length){q.nodeValue=p.decodeHtmlEntity(L[R]);var X=n.getBBox();K.push({text:L[R],width:X.width})}}}return B.style.display="none",{spaceWidth:P,lineCount:G,boundingBox:Q,words:K}}return !1}}();for(var c in w.flags){w.flags.hasOwnProperty(c)&&(w.flags[c].match=function(n){return n.match(this.regex)})}w.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:0.9,dataAttr:"data-src",renderers:["html","canvas","svg"]},w.vars={preempted:!1,resizableImages:[],invisibleImages:{},invisibleId:0,visibilityCheckStarted:!1,debounceTimer:null,cache:{}},function(){var n=t.newEl("canvas");n.getContext&&n.toDataURL("image/png").indexOf("data:image/png")!=-1&&(w.setup.renderer="canvas",w.setup.supportsCanvas=!0),document.createElementNS&&document.createElementNS(C,"svg").createSVGRect&&(w.setup.renderer="svg",w.setup.supportsSVG=!0)}(),m(),A&&A(function(){w.vars.preempted||l.run(),g.addEventListener?(g.addEventListener("resize",E,!1),g.addEventListener("orientationchange",E,!1)):g.attachEvent("onresize",E),"object"==typeof g.Turbolinks&&g.document.addEventListener("page:change",function(){l.run()})}),f.exports=l}).call(d,function(){return this}())},function(f,d){function e(m){function u(j){if(!Z){if(!b.body){return r(u)}for(Z=!0;j=h.shift();){r(j)}}}function w(j){(E||j.type===t||b[l]===i)&&(S(),u())}function S(){E?(b[c](v,w,p),m[c](t,w,p)):(b[C](a,w),m[C](s,w))}function r(j,k){setTimeout(j,+k>=0?k:1)}function y(j){Z?r(j):h.push(j)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function X(){document.removeEventListener("DOMContentLoaded",X,!1),document.readyState="complete"},!1),document.readyState="loading");var b=m.document,Y=b.documentElement,t="load",p=!1,s="on"+t,i="complete",l="readyState",n="attachEvent",C="detachEvent",o="addEventListener",v="DOMContentLoaded",a="onreadystatechange",c="removeEventListener",E=o in b,g=p,Z=p,h=[];if(b[l]===i){r(u)}else{if(E){b[o](v,w,p),m[o](t,w,p)}else{b[n](a,w),m[n](s,w);try{g=null==m.frameElement&&Y}catch(A){}g&&g.doScroll&&!function x(){if(!Z){try{g.doScroll("left")}catch(j){return r(x,50)}S(),u()}}()}}return y.version="1.4.0",y.isReady=function(){return Z},y}f.exports="undefined"!=typeof window&&e(window)},function(l,e,p){var r=encodeURIComponent,n=decodeURIComponent,q=p(4),i=p(5),a=/(\w+)\[(\d+)\]/,o=/\w+\.\w+/;e.parse=function(c){if("string"!=typeof c){return{}}if(c=q(c),""===c){return{}}"?"===c.charAt(0)&&(c=c.slice(1));for(var h={},f=c.split("&"),g=0;g<f.length;g++){var k,d,j,m=f[g].split("="),b=n(m[0]);if(k=a.exec(b)){h[k[1]]=h[k[1]]||[],h[k[1]][k[2]]=n(m[1])}else{if(k=o.test(b)){for(k=b.split("."),d=h;k.length;){if(j=k.shift(),j.length){if(d[j]){if(d[j]&&"object"!=typeof d[j]){break}}else{d[j]={}}k.length||(d[j]=n(m[1])),d=d[j]}}}else{h[m[0]]=null==m[1]?"":n(m[1])}}}return h},e.stringify=function(f){if(!f){return""}var g=[];for(var c in f){var b=f[c];if("array"!=i(b)){g.push(r(c)+"="+r(f[c]))}else{for(var d=0;d<b.length;++d){g.push(r(c+"["+d+"]")+"="+r(b[d]))}}}return g.join("&")}},function(f,d){function e(a){return a.replace(/^\s*|\s*$/g,"")}d=f.exports=e,d.left=function(a){return a.replace(/^\s*/,"")},d.right=function(a){return a.replace(/\s*$/,"")}},function(f,h){function e(a){return !(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}var g=Object.prototype.toString;f.exports=function(a){switch(g.call(a)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===a?"null":void 0===a?"undefined":a!==a?"nan":a&&1===a.nodeType?"element":e(a)?"buffer":(a=a.valueOf?a.valueOf():Object.prototype.valueOf.apply(a),typeof a)}},function(f,d){var e=function(b){function s(j,k){for(var g in k){j[g]=k[g]}return j}var l=1,o=function(g){l++,this.parent=null,this.children={},this.id=l,this.name="n"+l,"undefined"!=typeof g&&(this.name=g),this.x=this.y=this.z=0,this.width=this.height=0};o.prototype.resize=function(g,j){null!=g&&(this.width=g),null!=j&&(this.height=j)},o.prototype.moveTo=function(j,k,g){this.x=null!=j?j:this.x,this.y=null!=k?k:this.y,this.z=null!=g?g:this.z},o.prototype.add=function(g){var j=g.name;if("undefined"!=typeof this.children[j]){throw"SceneGraph: child already exists: "+j}this.children[j]=g,g.parent=this};var h=function(){o.call(this,"root"),this.properties=b};h.prototype=new o;var n=function(j,g){if(o.call(this,j),this.properties={fill:"#000000"},"undefined"!=typeof g){s(this.properties,g)}else{if("undefined"!=typeof j&&"string"!=typeof j){throw"SceneGraph: invalid node name"}}};n.prototype=new o;var a=function(){n.apply(this,arguments),this.type="group"};a.prototype=new n;var r=function(){n.apply(this,arguments),this.type="rect"};r.prototype=new n;var i=function(g){n.call(this),this.type="text",this.properties.text=g};i.prototype=new n;var c=new h;return this.Shape={Rect:r,Text:i,Group:a},this.root=c,this};f.exports=e},function(c,d){(function(a){d.extend=function(b,i){var l={};for(var e in b){b.hasOwnProperty(e)&&(l[e]=b[e])}if(null!=i){for(var k in i){i.hasOwnProperty(k)&&(l[k]=i[k])}}return l},d.cssProps=function(b){var e=[];for(var h in b){b.hasOwnProperty(h)&&e.push(h+":"+b[h])}return e.join(";")},d.encodeHtmlEntity=function(b){for(var i=[],j=0,e=b.length-1;e>=0;e--){j=b.charCodeAt(e),j>128?i.unshift(["&#",j,";"].join("")):i.unshift(b[e])}return i.join("")},d.imageExists=function(b,e){var h=new Image;h.onerror=function(){e.call(this,!1)},h.onload=function(){e.call(this,!0)},h.src=b},d.decodeHtmlEntity=function(b){return b.replace(/&#(\d+);/g,function(e,h){return String.fromCharCode(h)})},d.dimensionCheck=function(e){var b={height:e.clientHeight,width:e.clientWidth};return !(!b.height||!b.width)&&b},d.truthy=function(b){return"string"==typeof b?"true"===b||"yes"===b||"1"===b||"on"===b||"â"===b:!!b},d.parseColor=function(i){var m,n=/(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i,l=/^rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,b=/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0\.\d{1,}|1)\)$/,e=i.match(n);return null!==e?(m=e[1]||e[2],"#"!==m[0]?"#"+m:m):(e=i.match(l),null!==e?m="rgb("+e.slice(1).join(",")+")":(e=i.match(b),null!==e?m="rgba("+e.slice(1).join(",")+")":null))},d.canvasRatio=function(){var h=1,j=1;if(a.document){var b=a.document.createElement("canvas");if(b.getContext){var i=b.getContext("2d");h=a.devicePixelRatio||1,j=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1}}return h/j}}).call(d,function(){return this}())},function(f,d,e){(function(h){var a=e(9),b="http://www.w3.org/2000/svg",c=8;d.initSVG=function(g,l,t){var r,n,s=!1;g&&g.querySelector?(n=g.querySelector("style"),null===n&&(s=!0)):(g=a.newEl("svg",b),s=!0),s&&(r=a.newEl("defs",b),n=a.newEl("style",b),a.setAttr(n,{type:"text/css"}),r.appendChild(n),g.appendChild(r)),g.webkitMatchesSelector&&g.setAttribute("xmlns",b);for(var u=0;u<g.childNodes.length;u++){g.childNodes[u].nodeType===c&&g.removeChild(g.childNodes[u])}for(;n.childNodes.length;){n.removeChild(n.childNodes[0])}return a.setAttr(g,{width:l,height:t,viewBox:"0 0 "+l+" "+t,preserveAspectRatio:"none"}),g},d.svgStringToDataURI=function(){var k="data:image/svg+xml;charset=UTF-8,",g="data:image/svg+xml;charset=UTF-8;base64,";return function(i,j){return j?g+btoa(h.unescape(encodeURIComponent(i))):k+encodeURIComponent(i)}}(),d.serializeSVG=function(l,x){if(h.XMLSerializer){var t=new XMLSerializer,y="",o=x.stylesheets;if(x.svgXMLStylesheet){for(var g=a.createXML(),u=o.length-1;u>=0;u--){var s=g.createProcessingInstruction("xml-stylesheet",'href="'+o[u]+'" rel="stylesheet"');g.insertBefore(s,g.firstChild)}g.removeChild(g.documentElement),y=t.serializeToString(g)}var n=t.serializeToString(l);return n=n.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),y+n}}}).call(d,function(){return this}())},function(c,d){(function(a){d.newEl=function(b,f){if(a.document){return null==f?a.document.createElement(b):a.document.createElementNS(f,b)}},d.setAttr=function(b,e){for(var h in e){b.setAttribute(h,e[h])}},d.createXML=function(){if(a.DOMParser){return(new DOMParser).parseFromString("<xml />","application/xml")}},d.getNodeArray=function(b){var f=null;return"string"==typeof b?f=document.querySelectorAll(b):a.NodeList&&b instanceof a.NodeList?f=b:a.Node&&b instanceof a.Node?f=[b]:a.HTMLCollection&&b instanceof a.HTMLCollection?f=b:b instanceof Array?f=b:null===b&&(f=[]),f=Array.prototype.slice.call(f)}}).call(d,function(){return this}())},function(f,d){var e=function(a,b){"string"==typeof a&&(this.original=a,"#"===a.charAt(0)&&(a=a.slice(1)),/[^a-f0-9]+/i.test(a)||(3===a.length&&(a=a.replace(/./g,"$&$&")),6===a.length&&(this.alpha=1,b&&b.alpha&&(this.alpha=b.alpha),this.set(parseInt(a,16)))))};e.rgb2hex=function(h,b,c){function a(g){var k=(0|g).toString(16);return g<16&&(k="0"+k),k}return[h,b,c].map(a).join("")},e.hsl2rgb=function(b,s,l){var o=b/60,h=(1-Math.abs(2*l-1))*s,n=h*(1-Math.abs(parseInt(o)%2-1)),a=l-h/2,r=0,i=0,c=0;return o>=0&&o<1?(r=h,i=n):o>=1&&o<2?(r=n,i=h):o>=2&&o<3?(i=h,c=n):o>=3&&o<4?(i=n,c=h):o>=4&&o<5?(r=n,c=h):o>=5&&o<6&&(r=h,c=n),r+=a,i+=a,c+=a,r=parseInt(255*r),i=parseInt(255*i),c=parseInt(255*c),[r,i,c]},e.prototype.set=function(a){this.raw=a;var m=(16711680&this.raw)>>16,l=(65280&this.raw)>>8,i=255&this.raw,b=0.2126*m+0.7152*l+0.0722*i,n=-0.09991*m-0.33609*l+0.436*i,c=0.615*m-0.55861*l-0.05639*i;return this.rgb={r:m,g:l,b:i},this.yuv={y:b,u:n,v:c},this},e.prototype.lighten=function(m){var n=Math.min(1,Math.max(0,Math.abs(m)))*(m<0?-1:1),a=255*n|0,b=Math.min(255,Math.max(0,this.rgb.r+a)),l=Math.min(255,Math.max(0,this.rgb.g+a)),c=Math.min(255,Math.max(0,this.rgb.b+a)),i=e.rgb2hex(b,l,c);return new e(i)},e.prototype.toHex=function(a){return(a?"#":"")+this.raw.toString(16)},e.prototype.lighterThan=function(a){return a instanceof e||(a=new e(a)),this.yuv.y>a.yuv.y},e.prototype.blendAlpha=function(k){k instanceof e||(k=new e(k));var b=k,a=this,c=b.alpha*b.rgb.r+(1-b.alpha)*a.rgb.r,i=b.alpha*b.rgb.g+(1-b.alpha)*a.rgb.g,l=b.alpha*b.rgb.b+(1-b.alpha)*a.rgb.b;return new e(e.rgb2hex(c,i,l))},f.exports=e},function(c,d){c.exports={version:"2.9.4",svg_ns:"http://www.w3.org/2000/svg"}},function(e,t,n){function r(d,b){return c.element({tag:b,width:d.width,height:d.height,fill:d.properties.fill})}function i(b){return h.cssProps({fill:b.fill,"font-weight":b.font.weight,"font-family":b.font.family+", monospace","font-size":b.font.size+b.font.units})}function o(f,b,d){var g=d/2;return["M",g,g,"H",f-g,"V",b-g,"H",g,"V",0,"M",0,g,"L",f,b-g,"M",0,b-g,"L",f,g].join(" ")}var a=n(13),s=n(8),l=n(11),h=n(7),u=l.svg_ns,c={element:function(f){var b=f.tag,d=f.content||"";return delete f.tag,delete f.content,[b,d,f]}};e.exports=function(g,w){var A=w.engineSettings,p=A.stylesheets,m=p.map(function(z){return'<?xml-stylesheet rel="stylesheet" href="'+z+'"?>'}).join("\n"),f="holder_"+Number(new Date).toString(16),j=g.root,E=j.children.holderTextGroup,k="#"+f+" text { "+i(E.properties)+" } ";E.y+=0.8*E.textPositionData.boundingBox.height;var x=[];Object.keys(E.children).forEach(function(B){var z=E.children[B];Object.keys(z.children).forEach(function(H){var D=z.children[H],G=E.x+z.x+D.x,I=E.y+z.y+D.y,F=c.element({tag:"text",content:D.properties.text,x:G,y:I});x.push(F)})});var y=c.element({tag:"g",content:x}),N=null;if(j.children.holderBg.properties.outline){var v=j.children.holderBg.properties.outline;N=c.element({tag:"path",d:o(j.children.holderBg.width,j.children.holderBg.height,v.width),"stroke-width":v.width,stroke:v.fill,fill:"none"})}var d=r(j.children.holderBg,"rect"),M=[];M.push(d),v&&M.push(N),M.push(y);var O=c.element({tag:"g",id:f,content:M}),q=c.element({tag:"style",content:k,type:"text/css"}),L=c.element({tag:"defs",content:q}),C=c.element({tag:"svg",content:[L,O],width:j.properties.width,height:j.properties.height,xmlns:u,viewBox:[0,0,j.properties.width,j.properties.height].join(" "),preserveAspectRatio:"none"}),b=a(C);b=m+b[0];var P=s.svgStringToDataURI(b,"background"===w.mode);return P}},function(f,h,e){e(14);f.exports=function g(a,u,n){function i(m){var r=m.match(/^[\w-]+/),q={tag:r?r[0]:"div",attr:{},children:[]},k=m.match(/#([\w-]+)/),j=m.match(/\$([\w-]+)/),p=m.match(/\.[\w-]+/g);return k&&(q.attr.id=k[1],n[k[1]]=q),j&&(n[j[1]]=q),p&&(q.attr["class"]=p.join(" ").replace(/\./g,"")),m.match(/&$/g)&&(b=!1),q}function o(j,k){if(null!==k&&k!==!1&&void 0!==k){return"string"!=typeof k&&"object"!=typeof k?String(k):k}}function z(j){return j||0===j?String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;"):""}function d(j){return String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var l,c,y,s,t=1,b=!0;if(n=n||{},"string"==typeof a[0]){a[0]=i(a[0])}else{if(!Array.isArray(a[0])){throw new Error("First element of array must be a string, or an array and not "+JSON.stringify(a[0]))}t=0}for(;t<a.length;t++){if(a[t]===!1||null===a[t]){a[0]=!1;break}if(void 0!==a[t]&&a[t]!==!0){if("string"==typeof a[t]){b&&(a[t]=d(a[t])),a[0].children.push(a[t])}else{if("number"==typeof a[t]){a[0].children.push(a[t])}else{if(Array.isArray(a[t])){if(Array.isArray(a[t][0])){if(a[t].reverse().forEach(function(j){a.splice(t+1,0,j)}),0!==t){continue}t++}g(a[t],u,n),a[t][0]&&a[0].children.push(a[t][0])}else{if("function"==typeof a[t]){y=a[t]}else{if("object"!=typeof a[t]){throw new TypeError('"'+a[t]+'" is not allowed as a value.')}for(c in a[t]){a[t].hasOwnProperty(c)&&null!==a[t][c]&&a[t][c]!==!1&&("style"===c&&"object"==typeof a[t][c]?a[0].attr[c]=JSON.stringify(a[t][c],o).slice(2,-2).replace(/","/g,";").replace(/":"/g,":").replace(/\\"/g,"'"):a[0].attr[c]=a[t][c])}}}}}}}if(a[0]!==!1){l="<"+a[0].tag;for(s in a[0].attr){a[0].attr.hasOwnProperty(s)&&(l+=" "+s+'="'+z(a[0].attr[s])+'"')}l+=">",a[0].children.forEach(function(j){l+=j}),l+="</"+a[0].tag+">",a[0]=l}return n[0]=a[0],y&&y(a[0]),n}},function(f,h){function e(a){var i=""+a,m=g.exec(i);if(!m){return i}var b,n="",c=0,d=0;for(c=m.index;c<i.length;c++){switch(i.charCodeAt(c)){case 34:b="&quot;";break;case 38:b="&amp;";break;case 39:b="&#39;";break;case 60:b="&lt;";break;case 62:b="&gt;";break;default:continue}d!==c&&(n+=i.substring(d,c)),d=c+1,n+=b}return d!==c?n+i.substring(d,c):n}var g=/["'&<>]/;f.exports=e},function(e,h,j){var g=j(9),i=j(7);e.exports=function(){var a=g.newEl("canvas"),b=null;return function(n){null==b&&(b=a.getContext("2d"));var r=i.canvasRatio(),o=n.root;a.width=r*o.properties.width,a.height=r*o.properties.height,b.textBaseline="middle";var G=o.children.holderBg,m=r*G.width,f=r*G.height,c=2,u=c/2;b.fillStyle=G.properties.fill,b.fillRect(0,0,m,f),G.properties.outline&&(b.strokeStyle=G.properties.outline.fill,b.lineWidth=G.properties.outline.width,b.moveTo(u,u),b.lineTo(m-u,u),b.lineTo(m-u,f-u),b.lineTo(u,f-u),b.lineTo(u,u),b.moveTo(0,u),b.lineTo(m,f-u),b.moveTo(0,f-u),b.lineTo(m,u),b.stroke());var d=o.children.holderTextGroup;b.font=d.properties.font.weight+" "+r*d.properties.font.size+d.properties.font.units+" "+d.properties.font.family+", monospace",b.fillStyle=d.properties.fill;for(var H in d.children){var l=d.children[H];for(var p in l.children){var s=l.children[p],F=r*(d.x+l.x+s.x),v=r*(d.y+l.y+s.y+d.properties.leading/2);b.fillText(s.properties.text,F,v)}}return a.toDataURL("image/png")}}()}])}),function(c,d){d&&(Holder=c.Holder)}(this,"undefined"!=typeof Meteor&&"undefined"!=typeof Package);