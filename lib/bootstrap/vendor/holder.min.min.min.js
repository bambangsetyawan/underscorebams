/*!

Holder - client side image placeholders
Version 2.9.4+cabil
Â© 2016 Ivan Malopinsky - http://imsky.co

Site:     http://holderjs.com
Issues:   https://github.com/imsky/holder/issues
License:  MIT

*/
;!function(c){if(c.document){var d=c.document;d.querySelectorAll||(d.querySelectorAll=function(a){var g,h=d.createElement("style"),b=[];for(d.documentElement.firstChild.appendChild(h),d._qsa=[],h.styleSheet.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",c.scrollBy(0,0),h.parentNode.removeChild(h);d._qsa.length;){g=d._qsa.shift(),g.style.removeAttribute("x-qsa"),b.push(g)}return d._qsa=null,b}),d.querySelector||(d.querySelector=function(b){var a=d.querySelectorAll(b);return a.length?a[0]:null}),d.getElementsByClassName||(d.getElementsByClassName=function(a){return a=String(a).replace(/^|\s+/g,"."),d.querySelectorAll(a)}),Object.keys||(Object.keys=function(b){if(b!==Object(b)){throw TypeError("Object.keys called on non-object")}var e,a=[];for(e in b){Object.prototype.hasOwnProperty.call(b,e)&&a.push(e)}return a}),Array.prototype.forEach||(Array.prototype.forEach=function(b){if(void 0===this||null===this){throw TypeError()}var i=Object(this),a=i.length>>>0;if("function"!=typeof b){throw TypeError()}var e,j=arguments[1];for(e=0;e<a;e++){e in i&&b.call(j,i[e],e,i)}}),function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.atob=a.atob||function(m){m=String(m);var e,n=0,o=[],i=0,p=0;if(m=m.replace(/\s/g,""),m.length%4===0&&(m=m.replace(/=+$/,"")),m.length%4===1){throw Error("InvalidCharacterError")}if(/[^+\/0-9A-Za-z]/.test(m)){throw Error("InvalidCharacterError")}for(;n<m.length;){e=b.indexOf(m.charAt(n)),i=i<<6|e,p+=6,24===p&&(o.push(String.fromCharCode(i>>16&255)),o.push(String.fromCharCode(i>>8&255)),o.push(String.fromCharCode(255&i)),p=0,i=0),n+=1}return 12===p?(i>>=4,o.push(String.fromCharCode(255&i))):18===p&&(i>>=2,o.push(String.fromCharCode(i>>8&255)),o.push(String.fromCharCode(255&i))),o.join("")},a.btoa=a.btoa||function(e){e=String(e);var n,r,i,o,x,s,l,h=0,u=[];if(/[^\x00-\xFF]/.test(e)){throw Error("InvalidCharacterError")}for(;h<e.length;){n=e.charCodeAt(h++),r=e.charCodeAt(h++),i=e.charCodeAt(h++),o=n>>2,x=(3&n)<<4|r>>4,s=(15&r)<<2|i>>6,l=63&i,h===e.length+2?(s=64,l=64):h===e.length+1&&(l=64),u.push(b.charAt(o),b.charAt(x),b.charAt(s),b.charAt(l))}return u.join("")}}(c),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=this.__proto__||this.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){if("performance" in c==!1&&(c.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now" in c.performance==!1){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart),c.performance.now=function(){return Date.now()-a}}}(),c.requestAnimationFrame||(c.webkitRequestAnimationFrame&&c.webkitCancelAnimationFrame?!function(a){a.requestAnimationFrame=function(b){return webkitRequestAnimationFrame(function(){b(a.performance.now())})},a.cancelAnimationFrame=a.webkitCancelAnimationFrame}(c):c.mozRequestAnimationFrame&&c.mozCancelAnimationFrame?!function(a){a.requestAnimationFrame=function(b){return mozRequestAnimationFrame(function(){b(a.performance.now())})},a.cancelAnimationFrame=a.mozCancelAnimationFrame}(c):!function(a){a.requestAnimationFrame=function(b){return a.setTimeout(b,1000/60)},a.cancelAnimationFrame=a.clearTimeout}(c))}}(this),function(c,d){"object"==typeof exports&&"object"==typeof module?module.exports=d():"function"==typeof define&&define.amd?define([],d):"object"==typeof exports?exports.Holder=d():c.Holder=d()}(this,function(){return function(d){function e(a){if(f[a]){return f[a].exports}var b=f[a]={exports:{},id:a,loaded:!1};return d[a].call(b.exports,b,b.exports,e),b.loaded=!0,b.exports}var f={};return e.m=d,e.c=f,e.p="",e(0)}([function(d,e,f){d.exports=f(1)},function(d,e,f){(function(m){function i(q,G,n,B){var H=T(n.substr(n.lastIndexOf(q.domain)),q);H&&c({mode:null,el:B,flags:H,engineSettings:G})}function T(n,L){var H={theme:ad(x.settings.themes.gray,null),stylesheets:L.stylesheets,instanceOptions:L},J=n.indexOf("?"),B=[n];J!==-1&&(B=[n.slice(0,J),n.slice(J+1)]);var I=B[0].split("/");H.holderURL=n;var N=I[1],K=N.match(/([\d]+p?)x([\d]+p?)/);if(!K){return !1}if(H.fluid=N.indexOf("p")!==-1,H.dimensions={width:K[1].replace("p","%"),height:K[2].replace("p","%")},2===B.length){var G=s.parse(B[1]);if(t.truthy(G.ratio)){H.fluid=!0;var q=parseFloat(H.dimensions.width.replace("%","")),M=parseFloat(H.dimensions.height.replace("%",""));M=Math.floor(100*(M/q)),q=100,H.dimensions.width=q+"%",H.dimensions.height=M+"%"}if(H.auto=t.truthy(G.auto),G.bg&&(H.theme.bg=t.parseColor(G.bg)),G.fg&&(H.theme.fg=t.parseColor(G.fg)),G.bg&&!G.fg&&(H.autoFg=!0),G.theme&&H.instanceOptions.themes.hasOwnProperty(G.theme)&&(H.theme=ad(H.instanceOptions.themes[G.theme],null)),G.text&&(H.text=G.text),G.textmode&&(H.textmode=G.textmode),G.size&&(H.size=G.size),G.font&&(H.font=G.font),G.align&&(H.align=G.align),G.lineWrap&&(H.lineWrap=G.lineWrap),H.nowrap=t.truthy(G.nowrap),H.outline=t.truthy(G.outline),t.truthy(G.random)){x.vars.cache.themeKeys=x.vars.cache.themeKeys||Object.keys(H.instanceOptions.themes);var P=x.vars.cache.themeKeys[0|Math.random()*x.vars.cache.themeKeys.length];H.theme=ad(H.instanceOptions.themes[P],null)}}return H}function c(n){var N=n.mode,U=n.el,K=n.flags,P=n.engineSettings,H=K.dimensions,M=K.theme,Q=H.width+"x"+H.height;N=null==N?K.fluid?"fluid":"image":N;var V=/holder_([a-z]+)/g,W=!1;if(null!=K.text&&(M.text=K.text,"object"===U.nodeName.toLowerCase())){for(var q=M.text.split("\\n"),J=0;J<q.length;J++){q[J]=t.encodeHtmlEntity(q[J])}M.text=q.join("\\n")}if(M.text){var B=M.text.match(V);null!==B&&B.forEach(function(X){"holder_dimensions"===X&&(M.text=M.text.replace(X,Q))})}var R=K.holderURL,G=ad(P,null);if(K.font&&(M.font=K.font,!G.noFontFallback&&"img"===U.nodeName.toLowerCase()&&x.setup.supportsCanvas&&"svg"===G.renderer&&(G=ad(G,{renderer:"canvas"}))),K.font&&"canvas"==G.renderer&&(G.reRender=!0),"background"==N){null==U.getAttribute("data-background-src")&&u.setAttr(U,{"data-background-src":R})}else{var I={};I[x.vars.dataAttr]=R,u.setAttr(U,I)}K.theme=M,U.holderData={flags:K,engineSettings:G},"image"!=N&&"fluid"!=N||u.setAttr(U,{alt:M.text?W?M.text:M.text+" ["+Q+"]":Q});var L={mode:N,el:U,holderSettings:{dimensions:H,theme:M,flags:K},engineSettings:G};"image"==N?(K.auto||(U.style.width=H.width+"px",U.style.height=H.height+"px"),"html"==G.renderer?U.style.backgroundColor=M.bg:(z(L),"exact"==K.textmode&&(U.holderData.resizeUpdate=!0,x.vars.resizableImages.push(U),S(U)))):"background"==N&&"html"!=G.renderer?z(L):"fluid"==N&&(U.holderData.resizeUpdate=!0,"%"==H.height.slice(-1)?U.style.height=H.height:null!=K.auto&&K.auto||(U.style.height=H.height+"px"),"%"==H.width.slice(-1)?U.style.width=H.width:null!=K.auto&&K.auto||(U.style.width=H.width+"px"),"inline"!=U.style.display&&""!==U.style.display&&"none"!=U.style.display||(U.style.display="block"),p(U),"html"==G.renderer?U.style.backgroundColor=M.bg:(x.vars.resizableImages.push(U),S(U)))}function z(n){function H(){var M=null;switch(G.renderer){case"canvas":M=o(K,n);break;case"svg":M=j(K,n);break;default:throw"Holder: invalid renderer: "+G.renderer}return M}var J=null,B=n.mode,I=n.el,L=n.holderSettings,G=n.engineSettings;switch(G.renderer){case"svg":if(!x.setup.supportsSVG){return}break;case"canvas":if(!x.setup.supportsCanvas){return}break;default:return}var q={width:L.dimensions.width,height:L.dimensions.height,theme:L.theme,flags:L.flags},K=k(q);if(J=H(),null==J){throw"Holder: couldn't render placeholder"}"background"==B?(I.style.backgroundImage="url("+J+")",G.noBackgroundSize||(I.style.backgroundSize=q.width+"px "+q.height+"px")):("img"===I.nodeName.toLowerCase()?u.setAttr(I,{src:J}):"object"===I.nodeName.toLowerCase()&&u.setAttr(I,{data:J,type:"image/svg+xml"}),G.reRender&&m.setTimeout(function(){var M=H();if(null==M){throw"Holder: couldn't render placeholder"}"img"===I.nodeName.toLowerCase()?u.setAttr(I,{src:M}):"object"===I.nodeName.toLowerCase()&&u.setAttr(I,{data:M,type:"image/svg+xml"})},150)),u.setAttr(I,{"data-holder-rendered":!0})}function k(J){function q(ai,ak,ah,aj){ak.width=ah,ak.height=aj,ai.width=Math.max(ai.width,ak.width),ai.height+=ak.height}var X=x.defaults.size;switch(parseFloat(J.theme.size)?X=J.theme.size:parseFloat(J.flags.size)&&(X=J.flags.size),J.font={family:J.theme.font?J.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:a(J.width,J.height,X,x.defaults.scale),units:J.theme.units?J.theme.units:x.defaults.units,weight:J.theme.fontweight?J.theme.fontweight:"bold"},J.text=J.theme.text||Math.floor(J.width)+"x"+Math.floor(J.height),J.noWrap=J.theme.nowrap||J.flags.nowrap,J.align=J.theme.align||J.flags.align||"center",J.flags.textmode){case"literal":J.text=J.flags.dimensions.width+"x"+J.flags.dimensions.height;break;case"exact":if(!J.flags.exactDimensions){break}J.text=Math.floor(J.flags.exactDimensions.width)+"x"+Math.floor(J.flags.exactDimensions.height)}var ae=J.flags.lineWrap||x.setup.lineWrapRatio,P=J.width*ae,Y=P,U=new v({width:J.width,height:J.height}),n=U.Shape,N=new n.Rect("holderBg",{fill:J.theme.bg});if(N.resize(J.width,J.height),U.root.add(N),J.flags.outline){var Q=new y(N.properties.fill);Q=Q.lighten(Q.lighterThan("7f7f7f")?-0.1:0.1),N.properties.outline={fill:Q.toHex(!0),width:2}}var H=J.theme.fg;if(J.flags.autoFg){var I=new y(N.properties.fill),K=new y("fff"),Z=new y("000",{alpha:0.285714});H=I.blendAlpha(I.lighterThan("7f7f7f")?Z:K).toHex(!0)}var M=new n.Group("holderTextGroup",{text:J.text,align:J.align,font:J.font,fill:H});M.moveTo(null,null,1),U.root.add(M);var V=M.textPositionData=w(U);if(!V){throw"Holder: staging fallback not supported yet."}M.properties.leading=V.boundingBox.height;var B=null,G=null;if(V.lineCount>1){var W,ab=0,aa=0,ag=0;G=new n.Group("line"+ag),"left"!==J.align&&"right"!==J.align||(Y=J.width*(1-2*(1-ae)));for(var L=0;L<V.words.length;L++){var R=V.words[L];B=new n.Text(R.text);var af="\\n"==R.text;!J.noWrap&&(ab+R.width>=Y||af===!0)&&(q(M,G,ab,M.properties.leading),M.add(G),ab=0,aa+=M.properties.leading,ag+=1,G=new n.Group("line"+ag),G.y=aa),af!==!0&&(B.moveTo(ab,0),ab+=V.spaceWidth+R.width,G.add(B))}if(q(M,G,ab,M.properties.leading),M.add(G),"left"===J.align){M.moveTo(J.width-P,null,null)}else{if("right"===J.align){for(W in M.children){G=M.children[W],G.moveTo(J.width-G.width,null,null)}M.moveTo(0-(J.width-P),null,null)}else{for(W in M.children){G=M.children[W],G.moveTo((M.width-G.width)/2,null,null)}M.moveTo((J.width-M.width)/2,null,null)}}M.moveTo(null,(J.height-M.height)/2,null),(J.height-M.height)/2<0&&M.moveTo(null,0,null)}else{B=new n.Text(J.text),G=new n.Group("line0"),G.add(B),M.add(G),"left"===J.align?M.moveTo(J.width-P,null,null):"right"===J.align?M.moveTo(0-(J.width-P),null,null):M.moveTo((J.width-V.boundingBox.width)/2,null,null),M.moveTo(null,(J.height-V.boundingBox.height)/2,null)}return U}function a(B,n,I,K){var G=parseInt(B,10),J=parseInt(n,10),q=Math.max(G,J),L=Math.min(G,J),H=0.8*Math.min(L,q*K);return Math.round(Math.max(I,H))}function S(n){var L;L=null==n||null==n.nodeType?x.vars.resizableImages:[n];for(var H=0,J=L.length;H<J;H++){var B=L[H];if(B.holderData){var I=B.holderData.flags,K=E(B);if(K){if(!B.holderData.resizeUpdate){continue}if(I.fluid&&I.auto){var G=B.holderData.fluidConfig;switch(G.mode){case"width":K.height=K.width/G.ratio;break;case"height":K.width=K.height*G.ratio}}var q={mode:"image",holderSettings:{dimensions:K,theme:I.theme,flags:I},el:B,engineSettings:B.holderData.engineSettings};"exact"==I.textmode&&(I.exactDimensions=K,q.holderSettings.dimensions=I.dimensions),z(q)}else{F(B)}}}}function p(q){if(q.holderData){var G=E(q);if(G){var n=q.holderData.flags,B={fluidHeight:"%"==n.dimensions.height.slice(-1),fluidWidth:"%"==n.dimensions.width.slice(-1),mode:null,initialDimensions:G};B.fluidWidth&&!B.fluidHeight?(B.mode="width",B.ratio=B.initialDimensions.width/parseFloat(n.dimensions.height)):!B.fluidWidth&&B.fluidHeight&&(B.mode="height",B.ratio=parseFloat(n.dimensions.width)/B.initialDimensions.height),q.holderData.fluidConfig=B}else{F(q)}}}function C(){var q,n=[],B=Object.keys(x.vars.invisibleImages);B.forEach(function(G){q=x.vars.invisibleImages[G],E(q)&&"img"==q.nodeName.toLowerCase()&&(n.push(q),delete x.vars.invisibleImages[G])}),n.length&&r.run({images:n}),setTimeout(function(){m.requestAnimationFrame(C)},10)}function D(){x.vars.visibilityCheckStarted||(m.requestAnimationFrame(C),x.vars.visibilityCheckStarted=!0)}function F(n){n.holderData.invisibleId||(x.vars.invisibleId+=1,x.vars.invisibleImages["i"+x.vars.invisibleId]=n,n.holderData.invisibleId=x.vars.invisibleId)}function g(n){x.vars.debounceTimer||n.call(this),x.vars.debounceTimer&&m.clearTimeout(x.vars.debounceTimer),x.vars.debounceTimer=m.setTimeout(function(){x.vars.debounceTimer=null,n.call(this)},x.setup.debounce)}function O(){g(function(){S(null)})}var b=f(2),s=f(3),v=f(6),t=f(7),A=f(8),u=f(9),y=f(10),h=f(11),j=f(12),o=f(15),ad=t.extend,E=t.dimensionCheck,ac=h.svg_ns,r={version:h.version,addTheme:function(n,q){return null!=n&&null!=q&&(x.settings.themes[n]=q),delete x.vars.cache.themeKeys,this},addImage:function(q,B){var n=u.getNodeArray(B);return n.forEach(function(I){var G=u.newEl("img"),H={};H[x.setup.dataAttr]=q,u.setAttr(G,H),I.appendChild(G)}),this},setResizeUpdate:function(n,q){n.holderData&&(n.holderData.resizeUpdate=!!q,n.holderData.resizeUpdate&&S(n))},run:function(q){q=q||{};var n={},I=ad(x.settings,q);x.vars.preempted=!0,x.vars.dataAttr=I.dataAttr||x.setup.dataAttr,n.renderer=I.renderer?I.renderer:x.setup.renderer,x.setup.renderers.join(",").indexOf(n.renderer)===-1&&(n.renderer=x.setup.supportsSVG?"svg":x.setup.supportsCanvas?"canvas":"html");var B=u.getNodeArray(I.images),J=u.getNodeArray(I.bgnodes),G=u.getNodeArray(I.stylenodes),H=u.getNodeArray(I.objects);return n.stylesheets=[],n.svgXMLStylesheet=!0,n.noFontFallback=!!I.noFontFallback,n.noBackgroundSize=!!I.noBackgroundSize,G.forEach(function(M){if(M.attributes.rel&&M.attributes.href&&"stylesheet"==M.attributes.rel.value){var K=M.attributes.href.value,N=u.newEl("a");N.href=K;var L=N.protocol+"//"+N.host+N.pathname+N.search;n.stylesheets.push(L)}}),J.forEach(function(R){if(m.getComputedStyle){var L=m.getComputedStyle(R,null).getPropertyValue("background-image"),M=R.getAttribute("data-background-src"),K=M||L,V=null,N=I.domain+"/",P=K.indexOf(N);if(0===P){V=K}else{if(1===P&&"?"===K[0]){V=K.slice(1)}else{var Q=K.substr(P).match(/([^\"]*)"?\)/);if(null!==Q){V=Q[1]}else{if(0===K.indexOf("url(")){throw"Holder: unable to parse background URL: "+K}}}}if(V){var U=T(V,I);U&&c({mode:"background",el:R,flags:U,engineSettings:n})}}}),H.forEach(function(N){var K={};try{K.data=N.getAttribute("data"),K.dataSrc=N.getAttribute(x.vars.dataAttr)}catch(M){}var L=null!=K.data&&0===K.data.indexOf(I.domain),P=null!=K.dataSrc&&0===K.dataSrc.indexOf(I.domain);L?i(I,n,K.data,N):P&&i(I,n,K.dataSrc,N)}),B.forEach(function(L){var P={};try{P.src=L.getAttribute("src"),P.dataSrc=L.getAttribute(x.vars.dataAttr),P.rendered=L.getAttribute("data-holder-rendered")}catch(Q){}var K=null!=P.src,M=null!=P.dataSrc&&0===P.dataSrc.indexOf(I.domain),N=null!=P.rendered&&"true"==P.rendered;K?0===P.src.indexOf(I.domain)?i(I,n,P.src,L):M&&(N?i(I,n,P.dataSrc,L):!function(R,V,W,U,X){t.imageExists(R,function(Y){Y||i(V,W,U,X)})}(P.src,I,n,P.dataSrc,L)):M&&i(I,n,P.dataSrc,L)}),this}},x={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",themes:{gray:{bg:"#EEEEEE",fg:"#AAAAAA"},social:{bg:"#3a5a97",fg:"#FFFFFF"},industrial:{bg:"#434A52",fg:"#C2F200"},sky:{bg:"#0D8FDB",fg:"#FFFFFF"},vine:{bg:"#39DBAC",fg:"#1E292C"},lava:{bg:"#F8591A",fg:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16}},w=function(){var q=null,B=null,n=null;return function(M){var R=M.root;if(x.setup.supportsSVG){var X=!1,L=function(Z){return document.createTextNode(Z)};null!=q&&q.parentNode===document.body||(X=!0),q=A.initSVG(q,R.properties.width,R.properties.height),q.style.display="block",X&&(B=u.newEl("text",ac),n=L(null),u.setAttr(B,{x:0}),B.appendChild(n),q.appendChild(B),document.body.appendChild(q),q.style.visibility="hidden",q.style.position="absolute",q.style.top="-100%",q.style.left="-100%");var P=R.children.holderTextGroup,U=P.properties;u.setAttr(B,{y:U.font.size,style:t.cssProps({"font-weight":U.font.weight,"font-size":U.font.size+U.font.units,"font-family":U.font.family})}),n.nodeValue=U.text;var I=B.getBBox(),Q=Math.ceil(I.width/R.properties.width),W=U.text.split(" "),Y=U.text.match(/\\n/g);Q+=null==Y?0:Y.length,n.nodeValue=U.text.replace(/[ ]+/g,"");var G=B.getComputedTextLength(),K=I.width-G,H=Math.round(K/Math.max(1,W.length-1)),V=[];if(Q>1){n.nodeValue="";for(var J=0;J<W.length;J++){if(0!==W[J].length){n.nodeValue=t.decodeHtmlEntity(W[J]);var N=B.getBBox();V.push({text:W[J],width:N.width})}}}return q.style.display="none",{spaceWidth:H,lineCount:Q,boundingBox:I,words:V}}return !1}}();for(var l in x.flags){x.flags.hasOwnProperty(l)&&(x.flags[l].match=function(n){return n.match(this.regex)})}x.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:0.9,dataAttr:"data-src",renderers:["html","canvas","svg"]},x.vars={preempted:!1,resizableImages:[],invisibleImages:{},invisibleId:0,visibilityCheckStarted:!1,debounceTimer:null,cache:{}},function(){var n=u.newEl("canvas");n.getContext&&n.toDataURL("image/png").indexOf("data:image/png")!=-1&&(x.setup.renderer="canvas",x.setup.supportsCanvas=!0),document.createElementNS&&document.createElementNS(ac,"svg").createSVGRect&&(x.setup.renderer="svg",x.setup.supportsSVG=!0)}(),D(),b&&b(function(){x.vars.preempted||r.run(),m.addEventListener?(m.addEventListener("resize",O,!1),m.addEventListener("orientationchange",O,!1)):m.attachEvent("onresize",O),"object"==typeof m.Turbolinks&&m.document.addEventListener("page:change",function(){r.run()})}),d.exports=r}).call(e,function(){return this}())},function(d,e){function f(h){function A(j){if(!S){if(!a.body){return n(A)}for(S=!0;j=ac.shift();){n(j)}}}function r(j){(v||j.type===o||a[g]===c)&&(w(),A())}function w(){v?(a[ab](p,r,m),h[ab](o,r,m)):(a[t](aa,r),h[t](E,r))}function n(j,k){setTimeout(j,+k>=0?k:1)}function s(j){S?n(j):ac.push(j)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x,!1),document.readyState="complete"},!1),document.readyState="loading");var a=h.document,y=a.documentElement,o="load",m=!1,E="on"+o,c="complete",g="readyState",i="attachEvent",t="detachEvent",l="addEventListener",p="DOMContentLoaded",aa="onreadystatechange",ab="removeEventListener",v=l in a,b=m,S=m,ac=[];if(a[g]===c){n(A)}else{if(v){a[l](p,r,m),h[l](o,r,m)}else{a[i](aa,r),h[i](E,r);try{b=null==h.frameElement&&y}catch(u){}b&&b.doScroll&&!function C(){if(!S){try{b.doScroll("left")}catch(j){return n(C,50)}w(),A()}}()}}return s.version="1.4.0",s.isReady=function(){return S},s}d.exports="undefined"!=typeof window&&f(window)},function(l,e,p){var r=encodeURIComponent,n=decodeURIComponent,q=p(4),i=p(5),a=/(\w+)\[(\d+)\]/,o=/\w+\.\w+/;e.parse=function(c){if("string"!=typeof c){return{}}if(c=q(c),""===c){return{}}"?"===c.charAt(0)&&(c=c.slice(1));for(var h={},f=c.split("&"),g=0;g<f.length;g++){var k,d,j,m=f[g].split("="),b=n(m[0]);if(k=a.exec(b)){h[k[1]]=h[k[1]]||[],h[k[1]][k[2]]=n(m[1])}else{if(k=o.test(b)){for(k=b.split("."),d=h;k.length;){if(j=k.shift(),j.length){if(d[j]){if(d[j]&&"object"!=typeof d[j]){break}}else{d[j]={}}k.length||(d[j]=n(m[1])),d=d[j]}}}else{h[m[0]]=null==m[1]?"":n(m[1])}}}return h},e.stringify=function(g){if(!g){return""}var c=[];for(var d in g){var b=g[d];if("array"!=i(b)){c.push(r(d)+"="+r(g[d]))}else{for(var f=0;f<b.length;++f){c.push(r(d+"["+f+"]")+"="+r(b[f]))}}}return c.join("&")}},function(d,e){function f(a){return a.replace(/^\s*|\s*$/g,"")}e=d.exports=f,e.left=function(a){return a.replace(/^\s*/,"")},e.right=function(a){return a.replace(/\s*$/,"")}},function(h,f){function g(a){return !(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}var e=Object.prototype.toString;h.exports=function(a){switch(e.call(a)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===a?"null":void 0===a?"undefined":a!==a?"nan":a&&1===a.nodeType?"element":g(a)?"buffer":(a=a.valueOf?a.valueOf():Object.prototype.valueOf.apply(a),typeof a)}},function(d,e){var f=function(b){function s(j,k){for(var g in k){j[g]=k[g]}return j}var l=1,o=function(g){l++,this.parent=null,this.children={},this.id=l,this.name="n"+l,"undefined"!=typeof g&&(this.name=g),this.x=this.y=this.z=0,this.width=this.height=0};o.prototype.resize=function(g,j){null!=g&&(this.width=g),null!=j&&(this.height=j)},o.prototype.moveTo=function(j,k,g){this.x=null!=j?j:this.x,this.y=null!=k?k:this.y,this.z=null!=g?g:this.z},o.prototype.add=function(g){var j=g.name;if("undefined"!=typeof this.children[j]){throw"SceneGraph: child already exists: "+j}this.children[j]=g,g.parent=this};var h=function(){o.call(this,"root"),this.properties=b};h.prototype=new o;var n=function(j,g){if(o.call(this,j),this.properties={fill:"#000000"},"undefined"!=typeof g){s(this.properties,g)}else{if("undefined"!=typeof j&&"string"!=typeof j){throw"SceneGraph: invalid node name"}}};n.prototype=new o;var a=function(){n.apply(this,arguments),this.type="group"};a.prototype=new n;var r=function(){n.apply(this,arguments),this.type="rect"};r.prototype=new n;var i=function(g){n.call(this),this.type="text",this.properties.text=g};i.prototype=new n;var c=new h;return this.Shape={Rect:r,Text:i,Group:a},this.root=c,this};d.exports=f},function(c,d){(function(a){d.extend=function(e,k){var b={};for(var i in e){e.hasOwnProperty(i)&&(b[i]=e[i])}if(null!=k){for(var l in k){k.hasOwnProperty(l)&&(b[l]=k[l])}}return b},d.cssProps=function(e){var h=[];for(var b in e){e.hasOwnProperty(b)&&h.push(b+":"+e[b])}return h.join(";")},d.encodeHtmlEntity=function(e){for(var j=[],b=0,i=e.length-1;i>=0;i--){b=e.charCodeAt(i),b>128?j.unshift(["&#",b,";"].join("")):j.unshift(e[i])}return j.join("")},d.imageExists=function(e,h){var b=new Image;b.onerror=function(){h.call(this,!1)},b.onload=function(){h.call(this,!0)},b.src=e},d.decodeHtmlEntity=function(b){return b.replace(/&#(\d+);/g,function(e,h){return String.fromCharCode(h)})},d.dimensionCheck=function(b){var e={height:b.clientHeight,width:b.clientWidth};return !(!e.height||!e.width)&&e},d.truthy=function(b){return"string"==typeof b?"true"===b||"yes"===b||"1"===b||"on"===b||"â"===b:!!b},d.parseColor=function(i){var m,b=/(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i,l=/^rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,n=/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0\.\d{1,}|1)\)$/,e=i.match(b);return null!==e?(m=e[1]||e[2],"#"!==m[0]?"#"+m:m):(e=i.match(l),null!==e?m="rgb("+e.slice(1).join(",")+")":(e=i.match(n),null!==e?m="rgba("+e.slice(1).join(",")+")":null))},d.canvasRatio=function(){var i=1,b=1;if(a.document){var h=a.document.createElement("canvas");if(h.getContext){var j=h.getContext("2d");i=a.devicePixelRatio||1,b=j.webkitBackingStorePixelRatio||j.mozBackingStorePixelRatio||j.msBackingStorePixelRatio||j.oBackingStorePixelRatio||j.backingStorePixelRatio||1}}return i/b}}).call(d,function(){return this}())},function(d,e,f){(function(b){var c=f(9),i="http://www.w3.org/2000/svg",a=8;e.initSVG=function(s,h,r){var l,t,n=!1;s&&s.querySelector?(t=s.querySelector("style"),null===t&&(n=!0)):(s=c.newEl("svg",i),n=!0),n&&(l=c.newEl("defs",i),t=c.newEl("style",i),c.setAttr(t,{type:"text/css"}),l.appendChild(t),s.appendChild(l)),s.webkitMatchesSelector&&s.setAttribute("xmlns",i);for(var g=0;g<s.childNodes.length;g++){s.childNodes[g].nodeType===a&&s.removeChild(s.childNodes[g])}for(;t.childNodes.length;){t.removeChild(t.childNodes[0])}return c.setAttr(s,{width:h,height:r,viewBox:"0 0 "+h+" "+r,preserveAspectRatio:"none"}),s},e.svgStringToDataURI=function(){var h="data:image/svg+xml;charset=UTF-8,",g="data:image/svg+xml;charset=UTF-8;base64,";return function(l,m){return m?g+btoa(b.unescape(encodeURIComponent(l))):h+encodeURIComponent(l)}}(),e.serializeSVG=function(x,s){if(b.XMLSerializer){var n=new XMLSerializer,t="",h=s.stylesheets;if(s.svgXMLStylesheet){for(var u=c.createXML(),o=h.length-1;o>=0;o--){var l=u.createProcessingInstruction("xml-stylesheet",'href="'+h[o]+'" rel="stylesheet"');u.insertBefore(l,u.firstChild)}u.removeChild(u.documentElement),t=n.serializeToString(u)}var g=n.serializeToString(x);return g=g.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),t+g}}}).call(e,function(){return this}())},function(c,d){(function(a){d.newEl=function(f,b){if(a.document){return null==b?a.document.createElement(f):a.document.createElementNS(b,f)}},d.setAttr=function(e,h){for(var b in h){e.setAttribute(b,h[b])}},d.createXML=function(){if(a.DOMParser){return(new DOMParser).parseFromString("<xml />","application/xml")}},d.getNodeArray=function(f){var b=null;return"string"==typeof f?b=document.querySelectorAll(f):a.NodeList&&f instanceof a.NodeList?b=f:a.Node&&f instanceof a.Node?b=[f]:a.HTMLCollection&&f instanceof a.HTMLCollection?b=f:f instanceof Array?b=f:null===f&&(b=[]),b=Array.prototype.slice.call(b)}}).call(d,function(){return this}())},function(d,e){var f=function(a,b){"string"==typeof a&&(this.original=a,"#"===a.charAt(0)&&(a=a.slice(1)),/[^a-f0-9]+/i.test(a)||(3===a.length&&(a=a.replace(/./g,"$&$&")),6===a.length&&(this.alpha=1,b&&b.alpha&&(this.alpha=b.alpha),this.set(parseInt(a,16)))))};f.rgb2hex=function(b,i,a){function c(g){var h=(0|g).toString(16);return g<16&&(h="0"+h),h}return[b,i,a].map(c).join("")},f.hsl2rgb=function(b,s,l){var o=b/60,h=(1-Math.abs(2*l-1))*s,n=h*(1-Math.abs(parseInt(o)%2-1)),a=l-h/2,r=0,i=0,c=0;return o>=0&&o<1?(r=h,i=n):o>=1&&o<2?(r=n,i=h):o>=2&&o<3?(i=h,c=n):o>=3&&o<4?(i=n,c=h):o>=4&&o<5?(r=n,c=h):o>=5&&o<6&&(r=h,c=n),r+=a,i+=a,c+=a,r=parseInt(255*r),i=parseInt(255*i),c=parseInt(255*c),[r,i,c]},f.prototype.set=function(c){this.raw=c;var m=(16711680&this.raw)>>16,a=(65280&this.raw)>>8,i=255&this.raw,n=0.2126*m+0.7152*a+0.0722*i,b=-0.09991*m-0.33609*a+0.436*i,o=0.615*m-0.55861*a-0.05639*i;return this.rgb={r:m,g:a,b:i},this.yuv={y:n,u:b,v:o},this},f.prototype.lighten=function(b){var m=Math.min(1,Math.max(0,Math.abs(b)))*(b<0?-1:1),c=255*m|0,n=Math.min(255,Math.max(0,this.rgb.r+c)),a=Math.min(255,Math.max(0,this.rgb.g+c)),o=Math.min(255,Math.max(0,this.rgb.b+c)),i=f.rgb2hex(n,a,o);return new f(i)},f.prototype.toHex=function(a){return(a?"#":"")+this.raw.toString(16)},f.prototype.lighterThan=function(a){return a instanceof f||(a=new f(a)),this.yuv.y>a.yuv.y},f.prototype.blendAlpha=function(b){b instanceof f||(b=new f(b));var i=b,c=this,l=i.alpha*i.rgb.r+(1-i.alpha)*c.rgb.r,a=i.alpha*i.rgb.g+(1-i.alpha)*c.rgb.g,m=i.alpha*i.rgb.b+(1-i.alpha)*c.rgb.b;return new f(f.rgb2hex(l,a,m))},d.exports=f},function(c,d){c.exports={version:"2.9.4",svg_ns:"http://www.w3.org/2000/svg"}},function(e,t,n){function r(d,b){return c.element({tag:b,width:d.width,height:d.height,fill:d.properties.fill})}function i(b){return h.cssProps({fill:b.fill,"font-weight":b.font.weight,"font-family":b.font.family+", monospace","font-size":b.font.size+b.font.units})}function o(f,b,d){var g=d/2;return["M",g,g,"H",f-g,"V",b-g,"H",g,"V",0,"M",0,g,"L",f,b-g,"M",0,b-g,"L",f,g].join(" ")}var a=n(13),s=n(8),l=n(11),h=n(7),u=l.svg_ns,c={element:function(f){var b=f.tag,d=f.content||"";return delete f.tag,delete f.content,[b,d,f]}};e.exports=function(f,m){var w=m.engineSettings,q=w.stylesheets,k=q.map(function(z){return'<?xml-stylesheet rel="stylesheet" href="'+z+'"?>'}).join("\n"),d="holder_"+Number(new Date).toString(16),g=f.root,y=g.children.holderTextGroup,j="#"+d+" text { "+i(y.properties)+" } ";y.y+=0.8*y.textPositionData.boundingBox.height;var v=[];Object.keys(y.children).forEach(function(z){var B=y.children[z];Object.keys(B.children).forEach(function(D){var G=B.children[D],I=y.x+B.x+G.x,F=y.y+B.y+G.y,H=c.element({tag:"text",content:G.properties.text,x:I,y:F});v.push(H)})});var A=c.element({tag:"g",content:v}),S=null;if(g.children.holderBg.properties.outline){var E=g.children.holderBg.properties.outline;S=c.element({tag:"path",d:o(g.children.holderBg.width,g.children.holderBg.height,E.width),"stroke-width":E.width,stroke:E.fill,fill:"none"})}var b=r(g.children.holderBg,"rect"),R=[];R.push(b),E&&R.push(S),R.push(A);var T=c.element({tag:"g",id:d,content:R}),C=c.element({tag:"style",content:j,type:"text/css"}),Q=c.element({tag:"defs",content:C}),x=c.element({tag:"svg",content:[Q,T],width:g.properties.width,height:g.properties.height,xmlns:u,viewBox:[0,0,g.properties.width,g.properties.height].join(" "),preserveAspectRatio:"none"}),p=a(x);p=k+p[0];var U=s.svgStringToDataURI(p,"background"===m.mode);return U}},function(h,f,g){g(14);h.exports=function e(a,s,n){function i(p){var j=p.match(/^[\w-]+/),r={tag:j?j[0]:"div",attr:{},children:[]},m=p.match(/#([\w-]+)/),k=p.match(/\$([\w-]+)/),q=p.match(/\.[\w-]+/g);return m&&(r.attr.id=m[1],n[m[1]]=r),k&&(n[k[1]]=r),q&&(r.attr["class"]=q.join(" ").replace(/\./g,"")),p.match(/&$/g)&&(b=!1),r}function o(j,k){if(null!==k&&k!==!1&&void 0!==k){return"string"!=typeof k&&"object"!=typeof k?String(k):k}}function u(j){return j||0===j?String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;"):""}function d(j){return String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var l,c,t,B,C=1,b=!0;if(n=n||{},"string"==typeof a[0]){a[0]=i(a[0])}else{if(!Array.isArray(a[0])){throw new Error("First element of array must be a string, or an array and not "+JSON.stringify(a[0]))}C=0}for(;C<a.length;C++){if(a[C]===!1||null===a[C]){a[0]=!1;break}if(void 0!==a[C]&&a[C]!==!0){if("string"==typeof a[C]){b&&(a[C]=d(a[C])),a[0].children.push(a[C])}else{if("number"==typeof a[C]){a[0].children.push(a[C])}else{if(Array.isArray(a[C])){if(Array.isArray(a[C][0])){if(a[C].reverse().forEach(function(j){a.splice(C+1,0,j)}),0!==C){continue}C++}e(a[C],s,n),a[C][0]&&a[0].children.push(a[C][0])}else{if("function"==typeof a[C]){t=a[C]}else{if("object"!=typeof a[C]){throw new TypeError('"'+a[C]+'" is not allowed as a value.')}for(c in a[C]){a[C].hasOwnProperty(c)&&null!==a[C][c]&&a[C][c]!==!1&&("style"===c&&"object"==typeof a[C][c]?a[0].attr[c]=JSON.stringify(a[C][c],o).slice(2,-2).replace(/","/g,";").replace(/":"/g,":").replace(/\\"/g,"'"):a[0].attr[c]=a[C][c])}}}}}}}if(a[0]!==!1){l="<"+a[0].tag;for(B in a[0].attr){a[0].attr.hasOwnProperty(B)&&(l+=" "+B+'="'+u(a[0].attr[B])+'"')}l+=">",a[0].children.forEach(function(j){l+=j}),l+="</"+a[0].tag+">",a[0]=l}return n[0]=a[0],t&&t(a[0]),n}},function(h,f){function g(c){var i=""+c,a=e.exec(i);if(!a){return i}var n,b="",o=0,d=0;for(o=a.index;o<i.length;o++){switch(i.charCodeAt(o)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}d!==o&&(b+=i.substring(d,o)),d=o+1,b+=n}return d!==o?b+i.substring(d,o):b}var e=/["'&<>]/;h.exports=g},function(i,e,h){var j=h(9),g=h(7);i.exports=function(){var a=j.newEl("canvas"),b=null;return function(n){null==b&&(b=a.getContext("2d"));var r=g.canvasRatio(),o=n.root;a.width=r*o.properties.width,a.height=r*o.properties.height,b.textBaseline="middle";var l=o.children.holderBg,H=r*l.width,G=r*l.height,F=2,c=F/2;b.fillStyle=l.properties.fill,b.fillRect(0,0,H,G),l.properties.outline&&(b.strokeStyle=l.properties.outline.fill,b.lineWidth=l.properties.outline.width,b.moveTo(c,c),b.lineTo(H-c,c),b.lineTo(H-c,G-c),b.lineTo(c,G-c),b.lineTo(c,c),b.moveTo(0,c),b.lineTo(H,G-c),b.moveTo(0,G-c),b.lineTo(H,c),b.stroke());var m=o.children.holderTextGroup;b.font=m.properties.font.weight+" "+r*m.properties.font.size+m.properties.font.units+" "+m.properties.font.family+", monospace",b.fillStyle=m.properties.fill;for(var s in m.children){var u=m.children[s];for(var p in u.children){var v=u.children[p],f=r*(m.x+u.x+v.x),d=r*(m.y+u.y+v.y+m.properties.leading/2);b.fillText(v.properties.text,f,d)}}return a.toDataURL("image/png")}}()}])}),function(c,d){d&&(Holder=c.Holder)}(this,"undefined"!=typeof Meteor&&"undefined"!=typeof Package);